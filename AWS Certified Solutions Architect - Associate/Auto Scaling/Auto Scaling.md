EC2 Auto Scaling  
처음에 원하는 용량만큼 생기고 최소용량과 최대용량을 설정해 그만큼 줄고/늘고 한다.  

![image](https://user-images.githubusercontent.com/67897827/181280249-59c7499e-663f-4ce1-a479-8a3f63d7123e.png)

시작 템플릿을 가지고 오토스케일링 그룹을 만들어 주고, 만들어진 그룹을 가지고 조정정책을 통해서 시작 조건 설정

EC2 Auto Scaling - 조정 정책  
★항상 현재 인스턴스 수준 유지 관리  
• 지정된 수의 실행 인스턴스를 항상 유지하도록 Auto Scaling 그룹을 구성  
• 인스턴스가 비정상 상태임을 확인하면 해당 인스턴스를 종료한 다음 새 인스턴스를 시작  
★수동 조정  
• 최대, 최소 또는 원하는 용량의 변경 사항만 지정하는 경우 사용  
★일정을 기반으로 조정  
• 확장 작업이 시간 및 날짜 함수에 따라 자동으로 수행됨  
• 예, 매주 일요일에는 인스턴스 4대, 다른 요일에는 2대 실행  
★온디맨드 기반 조정  
• 수요 변화에 맞춰 Auto Scaling 그룹의 크기를 동적으로 조정  
• 예, CPU 사용량을 50%기준으로 하고 사용량 기준에 따라 EC2 인스턴스 수를 증가하거나 감소  

 ★-2 이러한 온디맨드 기반 조정을 동적 조정이라고 하는데 크게 3종류가 있다.  
 ■대상 추적 조정(Target Tracking Scaling)  
• 지정한 지표가 목표값을 초과할 때 한해서 Auto Scaling 그룹을 확장 하는 방식  
• 예, CPU 사용률 목표값을 50%로 설정한 후 Auto Scaling 그룹이 목표값을 초과하면 EC2 인스턴스 증가  
• CPU 평균 사용률, 네트워크 인터페이스에서 송/수신한 평균 바이트 수, 로드발란서 요청 수 등의 지표 사용 가능  
 ■단계 조정(Step Scaling)  
• CloudWatch alarm의 지표를 기반으로 Auto Scaling 그룹을 확장 하는 방식  
• 예, CPU 사용률이 60% 초과하면 Auto Scaling Group 10% 증가 CPU 사용률이 30% 이하면 Auto Scaling Group 10%감소  
 ■단순 조정(Simple Scaling)  
• CloudWatch alarm의 지표를 기반으로 Auto Scaling 그룹을 확장 하는 방식  
• 예, CPU 사용률이 60% 초과하면 EC2 인스턴스 2개 증가 CPU 사용률이 30% 이하면 EC2 인스턴스 1개 감소  

★예측 조정 사용 (Predictive Scaling)  
• 머신러닝을 사용하여 CloudWatch의 기록 데이터를 기반으로 용량 필요량을 예측  

----> Amazon SQS기반 크기를 조정 할 수 있다.  

EC2 Auto Scaling – 조정 휴지(Scaling Cooldowns)  
• EC2가 증가 또는 감소하는 활동이 발생하면 조정 휴지 기간(Cooldown Period)을 가짐(처음 증가하게 되서 부팅하면 갑자기 CPU사용량이 증가하는데 이시간동안은 지표값 측정 ㄴ)  
• 디폴트 조정 휴지 기간은 300초  
• 조정 휴지 기간 동안 Auto Scaling Group은 EC2를 종료하거나 시작하지 않음  
• EC2 인스턴스가 처음 시작된 다음 안정적인 서비스 상태가 될 때까지 시간이 소요 됨  
• EC2가 안정적인 서비스 상태가 될 때까지 스케일링을 하지 않도록 차단하는 역할을 함  
• 불필요한 EC2 인스턴스가 생성되거나 종료되는 것을 방지 하는 기능  

![image](https://user-images.githubusercontent.com/67897827/181289325-93e15852-20f7-42f2-b9ac-d3d947735f18.png)

(실습)
먼저 시작템플릿 만들기, 이름 ASG_EC2,나머지 냅두고 AMI선택,인스턴스 유형 선택,키페어선택,네트워크VPC선택,보안그룹은 전에 ELB할때 만든 ssh_web_access선택,
나머지 냅두고 고급세부정보 열어서 사용자 데이터에 웹서버 생성 스크립트 추가(ELB란에 있음)  
-> 오토스케일링 그룹 생성,이름ASG,만든시작템플릿->네트워크가서 디폴트 VPC와 가용영역 4군데 모두 체크 후 다음 -> 로드밸런서 연결할수있는데 일단 없음 -> 다음
-> 그룹크기 111로(후에 편집으로 만지면 됨),조정정책 지금은 없음하고 다음-> 알림태그 다 건들지말고 다음  

오토스케일링 그룹에서 자동 조정 에서 필요한 조정정책 쓰기

