EC2최대절전 사용하려면 스토리지가 암호화되야한다.  

윈도우에서 EC2에 원격으로 접속하는 방식(지금은 AMI가 리눅스일때 SSH로 접근하는 방식이다.)  
1. 윈도우에서 파웨쉘에 접근한다.  
2. 명령어를 쳐주는데 명령어는 AWS EC2만든것에서 오른쪽 상단에 연결이라는 메뉴 눌러서 SSH클라이언트 들어가면 명령어가 있다.(ssh -i "c:\~~키페어경로" ec2-user@서버퍼블릭ip주소  
3. 그러면 사용자가 허용 사용자가 너무 많다고 뜰텐데-> 키페어파일가서 오른쪽마우스 속성->보안->고급클릭->상속안함(이개체에 상속된 모든 권한 제거합니다)후적용
-> 사용권한변경 편집누르기->추가눌러서사용자이름(내컴퓨터User이름)쓰고 이름확인->파워쉘가서 다시 명령어 입력  

EC2 Linux 인스턴스 웹서버 생성 실습  
• SSH 원격접속 후 리눅스 명령어 입력을 통한 웹 서버 생성  
• 아래 명령어를 입력하기 전에 sudo su를 입력하여 root계정으로 전환 후 아래 명령어 입력  
• 웹 서버 생성 명령어  
yum update -y  
yum install httpd -y  
service httpd start  
chkconfig httpd on  

cd /var/www/html 여기서부턴 html만져준거    
echo ＂Hello Inostudy. $(hostname -f)" > index.html  

인스턴스 구매옵션  
- 온디맨드 인스턴스  
약정 없이 초당 사용한 만큼 비용 지불  
- 스팟 인스턴스  
사용 안 하는 인스턴스를 경매 방식으로 구매하여 사용  
- 예약 인스턴스  
1년 또는 3년 기간을 약정하여 인스턴스를 사용  
- Saving Plan  
1년 또는 3년 기간의 일정 사용량을 약정하여 시간당 요금으로 인스턴스를 사용  
- 전용 호스트/전용 인스턴스  
전용 물리적 서버를 할당 받아서 인스턴스를 사용  


온디맨드 인스턴스 (On-Demand Instance)  
- 단기간 동안 예측할 수 없는 워크로드 및 중단되어서는 안되는 애플리케이션에 적합

예약 인스턴스 (Reserved Instance)  
- 선택가능한 예약 인스턴스 유형  
✓ 표준 예약 인스턴스(Standard Reserved Instances): 인스턴스 타입을 지정하면 예약기간동안 변경 불가능  
✓ 전환형 예약 인스턴스(Convertible Reserved Instances): 예약기간동안 인스턴스 타입 변경가능  
✓ 정기 예약 인스턴스(Scheduled Reserved Instances): 지정된 시간, 날짜 동안에 인스턴스가 시작되어 사용(반복적
이며 하루, 한 주 또는 한달의 일부 기간 동안 필요한 경우 적합)  

Saving Plans  
- EC2 뿐만 아니라 Lambda 및 Fargate 서비스도 사용 가능  
- 1년 또는 3년 기간에 특정 사용량 약정으로 구매하는 인스턴스  
- 예를 들어 한 시간에 $5의 컴퓨팅 사용량을 약정하면 $5까지 Saving Plans 가격이 청구 되고 초과 사용량은 온디맨드 요금이 청구 됨.  

전용 호스트  
• 물리적인 전용 서버를 할당 받아 사용하는 방식  
• CPU 소켓, 코어 등이 표시 됨  
• 사용자가 인스턴스 배치 방법을 지정할 수 있음  
• 소켓당, 코어당 또는 VM 당으로 사용하는 소프트웨어 라이선스 사용 가능  
• CPU 코어나 물리적 서버에 할당되는 라이선스를 기존에 보유한 경우에 적합(이게 포인트, 굳이 지정해서 쓰는데는 내가 거기 할인권이 있으니까 쓰는거지)  
전용 인스턴스
• 물리적인 전용 서버를 할당 받아 사용하는 방식  
• 전용 호스트에서 사용가능한 CPU 코어, 인스턴스 배치, 사용자 라이선스 사용 불가(이게 전용 호스트와 다른점)  

스팟 인스턴스  
- 사용하지 않는 예비 EC2용량을 경매방식으로 구매하여 사용하는 방식  
- 경매 조건에 미달하면(내가 쓰고 있다가 누가 더 비싸게 낙찰해 가면) 인스턴스가 정지 또는 종료 되므로 언제든지 시작 및 종료가 가능한 경우에 사용  
- 언제든 인스턴스가 종료될 수 있기 때문에 서버가 중단없이 지속적으로 실행 되어야하는 경우 사용 안함
- 여러 개의 스팟 인스턴스를 하나의 그룹으로 묶어 스팟 집합(Spot Fleets)으로 구매해서 사용(저렴한 가격으로 강력한 컴퓨팅 파워를 얻는다)  
- 예약인스턴스(스팟만 쓰면 언제든지 종료될 수 있으니까) + 스팟인스턴스(짧은 시간 급격하게 증가된 용량이 필요한 경우)의 조합으로 사용

보안그룹  
• EC2 인스턴스에 대한 인바운드 및 아웃바운드 트래픽을 제어하는 가상 방화벽 역할  
• EC2인스턴스의 ENI와 연결 됨  
• 보안 그룹은 허용 규칙만 지정 가능하고 거부 규칙은 지정 할 수 없음  
• 보안 그룹은 연결 상태를 추적하는 상태저장 방화벽 (Stateful Firewall)  

프라이빗 IP : 회사나 집의 내부에서만 사용하는 IP
직접적으로 인터넷 연결이 안되며 인터넷 게이트웨이를 통해야 함  

탄력적 IP (Elastic IP)
• 인스턴스 생성시 자동으로 할당 받은 Public IP는 인스턴스를 재시작 하면 다른 IP로 재할당 받기에 Public IP 주소가 변경됨  
• Elastic IP는 인터넷에 연결 가능한 고정적(정적)인 퍼블릭 IP 주소  
• EC2인스턴스의 ENI에 탄력적 IP주소를 연결하면 EC2인스턴스를 다시 시작해도 동일한 IP주소로 접속할 수 있음  

AWS에서 탄력적Ip 만든후 작업에서 탄력적 IP주소 연결

![image](https://user-images.githubusercontent.com/67897827/181174871-848e8f55-38a6-48ec-93fe-a40e4691c40c.png)

클러스터 배치그룹  
• 근접한 서버를 고속 네트워크로 연결하여 그룹화  
• 네트워크 지연시간이 매우 짧음  
• 짧은 대기시간이 필요한 고성능 컴퓨팅(HPC)등에 적합  

![image](https://user-images.githubusercontent.com/67897827/181175830-4d41e02f-f963-4f2a-b526-2f578d43b5d1.png)


파티션 배치그룹
• 하드웨어를 파티션으로 그룹화  
• 파티션끼리는 서로 다른 하드웨어 사용(하드웨어를 공유하지 않음)  
• 하나의 하드웨어 장애 발생시 다른 하드웨어에 영향이 없음(파티션간 장애의 영향을 분리가능)  
• 하둡 등의 빅데이터 분산처리 시스템에 사용  

![image](https://user-images.githubusercontent.com/67897827/181175885-4bee8176-91cb-4aba-bd67-e1668663df7e.png)


분산형 배치그룹
• 같은 서버랙의 서버를 그룹화  
• 분산그룹의 서버는 다른 서버랙에 있음  
• 분산그룹끼리 서버랙을 공유하지 않으므로 서버랙에 장애 발생시 안전  
• 매우 중요하고 고가용성이 필요한 애플리케이션에 적합  

![image](https://user-images.githubusercontent.com/67897827/181175926-4dad8671-9e75-436e-80f7-8f54534a6218.png)


우선 AWS가서 배치그룹을 만들고, EC2를 만들때 배치그룹 선택하는 창에서 선택해 준다.

EC2 라이프 사이클  
• 인스턴스 상태  
✓ 시작(Start): 인스턴스 전원을 켜는 것  
✓ 재부팅(Reboot): 인스턴스를 재부팅  
✓ 중지(Stop): 인스턴스 전원을 끄는 것  
✓ 종료(Termination): 인스턴스 삭제  
✓ 최대절전모드(Hibernate): RAM에 있는 애플리케이션 상태를 저장 후 중지상태 전환 노트북에서 종료를 안하고 스크린만 닫을 때와 동일
서버 부팅 시 프로세스 로드시간이 오래 걸리는 시스템의 경우 유용(서버 재부팅할때 다시시작이아니라 RAM에있는거 불러오니까 로드 시간이 빠르다)
