DNS (Domain Name System) & Route 53  
• DNS는 사람이 읽을 수 있는 도메인 이름(예: www.amazon.com)을 컴퓨터가 읽을 수 있는 IP 주소(예: 192.0.2.44)로 변환하는 시스템  
• Route 53은 AWS에서 제공하는 DNS (Domain Name System) 서비스  
• Route 53의 기능  
✓ 퍼블릭 도메인 구매 또는 이전 (.com, .net, .co.kr)  
✓ AWS내부 VPC에서만 사용할 수 있는 프라이빗 도메인 생성  
✓ 라우팅 정책 적용(단순 라우팅, 가중치기반, 지리적위치, 지연시간, 장애조치, 다중값 응답)  

![image](https://user-images.githubusercontent.com/67897827/182354523-85896600-63bc-48f8-9ecf-7d72db845f3e.png)


![image](https://user-images.githubusercontent.com/67897827/182355799-14196a6d-ec57-4944-b359-d28b1bc89c20.png)

우리는 사진에서처럼 Route53에 레코드를 이용해서 www.example.com 이라는 도메인이름에 웹서버의 IP정보를 맵핑시켜놨을 것이다. 

![image](https://user-images.githubusercontent.com/67897827/182356355-459af5c2-fda2-48cc-ae18-8d49232f847d.png)

![image](https://user-images.githubusercontent.com/67897827/182357179-b834f672-aa40-4436-83bc-fbbcb71ea7a2.png)


ip주소를 가지고있는것이 도메인에 호스팅영역에 있는 레코드값에서 가지고있다. 이 레코드 값에 따라 라우팅을 할 수 있따.

![image](https://user-images.githubusercontent.com/67897827/182358222-c2800240-b25d-43aa-ace4-fcc3838832d9.png)

(simple 라우팅 실습)  
우선 이 실습을 하기전에 EC2 웹서버 3개를 만들고 로드밸런서의 대상그룹 대상에 이 3개 웹서버 추가했고, 로드밸런서 클릭해서 ALB라는 로드밸런서에 리스너에서 대상그룹 추가해줬다.
-> 이제 Route53으로 가서(일단 퍼블릭으로 도메인 등록 해논 상황) -> 만든 도메인 호스팅영역 들어가서 레코드생성 -> 레코드이름,레코드A,ip주소 입력칸에 만들어논 EC2웹서버1의
ip주소를 입력,TTL은1분,단순라우팅 후 레코드 생성 -> 그러면 만들어진 도메인으로 구글창에 쳐보면 EC2웹서버 화면이 나오는거

(레코드에 alias 별칭사용해서 트래픽라우팅대상을 별칭으로하면 AWS리소스를 선택할수 있다.)  


(혹시 몰라서 그러지만 지금 하는 Route53실습은 레코드추가하는데 레코드이름은 동일하게해서 하는것이다.!)

![image](https://user-images.githubusercontent.com/67897827/182361689-bbe5e042-d339-4830-a30d-96dbd42020e8.png)

(가중치 라우팅 실습)  
위에 simple과 똑같이 하는데 단순말고 가중치로하고 레코드추가하면서 가충치 숫자 적어주면됨.

![image](https://user-images.githubusercontent.com/67897827/182362637-1d314af3-6ccc-4db4-826b-348fce85bc30.png)

(지연시간 실습)  
위와 똑같은 방법으로 레코드 추가하는데(A레코드에 웹서버1 ip주소 입력) 라우팅정책은 지연시간으로,리전은 서울,레코드ID, 다른레코드 추가해서 ip주소(이번에웹서버2)와,이번엔
리전은 미국으로 선택 나머지 동일하게 해서 레코드생성하면 내가 접속하는 위치 기준으로 지연시간이 더 짧은 쪽으로 접속됨

![image](https://user-images.githubusercontent.com/67897827/182365052-8e3ab699-1c8b-4c36-8807-c14891f18467.png)

(지리적위치 실습)  
위와 다 똑같은데 마찬가지로 라우팅정책을 지리적위치로 하고 한개는 웹서버1로ip주소적고 위치를 아시아, 레코드추가해 한개는 웹서버2로ip적고 위치 미국하면
이말은 즉 아시아에서 접속한 트래픽은 모두 웹서버1로 미국땅에서 접속한 ip는 웹서버2로 간다는 것이다.

Route53 – 상태 검사 (Health Check)  
• 서버의 상태를 모니터링 하는 기능  
• 상태확인을 모니터링하고 상태가 좋지 않은 경우 다른 서버로 라우팅 하는 장애조치를 구성할 수 있음  

![image](https://user-images.githubusercontent.com/67897827/182366045-77c19a37-a781-4190-a7ca-6c38e80114b8.png)

(실습)  
Route53왼쪽탭에 상태검사 생성 누르기 -> 이름,대상은 엔드포인트,HTTP에 ip주소는 웹서버1꺼, 고급구성에서 빠른으로 실패임계값2번으로(10초마다2번 실패하면 비정상이다란뜻)
후 다음 후 생성 똑같이 한개더만들기

후에 다시 호스팅영역 퍼블릭도메인 눌러서 레코드 생성 -> 이름,A레코드,ip주소는 웹서버1번,라우팅정책을 장애조치 클릭,레코드유형은 기본(즉 이 웹서버는 프라이머리 웹서버됨)
상태검사는 웹서버1,ID 후 레코드 한개추가하는데 이번엔 레코드유형 보조로 하고ip와 상태검사만 바꿔서 레코드추가 후 레코드 생성

웹서버1에 문제생김을 가정하기 위해 EC2 웹서버1에서 중간탭에 네트워킹에 인터페이스ID에가서 클릭하고 작업에서 보안그룹변경에서 현제있는거 제거하고 디폴트로(이건 HTTP접속 
안되는 거니까) 이러고 다시 만들어준 DNS로 접속하면 이제 서버2로 접속된다. 

![image](https://user-images.githubusercontent.com/67897827/182368450-490f752f-d318-4bd0-a38c-e9fb04fec448.png)

(실습)  
레코드 생성 -> 이름,A,ip는 웹서버1, 라우팅정책을 다중값 응답,상태검사냅두고 ID입력 후 레코드추가해서 똑같은데 이제 웹서버2번으로해서 레코드생성
커맨드창에서 nslookup (여긴 다중값응답으로 생성한 레코드 이름) 하면 Addresses가 두개가 나온다 이렇게 여러개의 레코드 응답을 받는것이 멀티밸류이다.

여기에 더해서 만들어진거(다중값으로) 레코드 눌러서 편집눌러 상태검사를 웹서버1번을 연결하고 이전처럼 웹서버1에 보안그룹바꿔서 HTTP연결 안되게 한후에
nslookup하면 잘되는 웹서버2번 껏만 나온다.

